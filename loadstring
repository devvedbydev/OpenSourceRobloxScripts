-- SET IDENTITY
getgenv().name = "SystemHook"
getgenv().identity = "SystemHook"
getgenv().threadidentity = "Systemhook"
getgenv().identifyexecutor = function()
    return "SystemHook"
end
getgenv().getexecutorname = function()
    return "SystemHook"
end
getgenv().identify = function()
    return "SystemHook"
end
getgenv().printidentity = function()
    print("SystemHook")
end
getgenv().getthreadidentity = function()
    print("SystemHook")
end
getgenv().setthreadidentity = function()
    print("Systemhook")
end

-- NOTIFICATION
local StarterGui = game:GetService("StarterGui")
StarterGui:SetCore("SendNotification", {
    Title = "Status: ",
    Text = "Injected!",
})

-- WELCOME USER
print("Welcome " .. game.Players.LocalPlayer.DisplayName .. ", thank you for choosing SystemHook.")

-- INTERNAL GUI
loadstring(game:HttpGet("https://raw.githubusercontent.com/hitbyharibo/byfron/main/internal_ui"))()

-- SET UUID
local url = "http://httpbin.org/ip"
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local function getIP()
    local response = game:HttpGet(url)
    local success, data = pcall(function()
        return HttpService:JSONDecode(response)
    end)
    if success and data then
        return data.origin
    else
        return nil
    end
end
local function longHash(input)
    local hash = 0xFFFFFFFF
    for i = 1, #input do
        local char = input:byte(i)
        hash = (hash * 31 + char) % 0xFFFFFFFF
    end
    local longHash = string.format("%08X%08X", hash, (hash * 31) % 0xFFFFFFFF)
    return longHash
end
local function generateUUID(username, ip)
    local rawString = username .. ip
    return longHash(rawString)
end
local function main()
    local player = Players.LocalPlayer
    if player then
        local username = player.Name
        local ip = getIP()
        if ip then
            -- Ensure getgenv().sys is defined
            if not getgenv().sys then
                getgenv().sys = {}
            end
            -- Generate and assign the UUID to getgenv().sys.uuid
            getgenv().sys.uuid = generateUUID(username, ip)
            print("Generated UUID: " .. getgenv().sys.uuid)
            setclipboard(getgenv().sys.uuid)  -- Copy the UUID to the clipboard
        else
            print("Could not retrieve IP address")
        end
    else
        print("Player not found")
    end
end
main()

-- SET USERAGENT
local function setupUserAgentModification()
    local originalRequest = request
    request = function(requestParams)
        local response = originalRequest(requestParams)
        if response and response.StatusCode == 200 then
            local success, data = pcall(function()
                return game:GetService("HttpService"):JSONDecode(response.Body)
            end)
            if success and type(data) == "table" then
                data["user-agent"] = "SystemHook"
                response.Body = game:GetService("HttpService"):JSONEncode(data)
            end
        end
        return response
    end
end
setupUserAgentModification()
while true do
    wait(0.01)
end
