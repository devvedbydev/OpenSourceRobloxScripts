-- GLOBAL VARIABLES AND FUNCTIONS

-- Set a global variable
getgenv().name = "ByfronBuddy"

-- Define custom user-agent globally
getgenv().useragent = "ByfronBuddy BETA"

-- Define global functions
getgenv().identifyexecutor = function()
    return "ByfronBuddy"
end

getgenv().getexecutorname = function()
    return "ByfronBuddy"
end

getgenv().identity = function()
    return "ByfronBuddy"
end

getgenv().printidentity = function()
    print("ByfronBuddy")
end

-- Function to intercept and mock HTTP requests
local function mockHttpRequest(requestFunc)
    return function(options)
        -- Ensure options.Headers is a table
        options.Headers = options.Headers or {}
        
        -- Set or override the User-Agent header
        options.Headers["User-Agent"] = getgenv().useragent
        
        -- Call the original HTTP request function
        return requestFunc(options)
    end
end

-- Override HTTP request functions
local originalHttpRequest

-- Check and override http.request
if type(http.request) == "function" then
    originalHttpRequest = http.request
    http.request = mockHttpRequest(originalHttpRequest)
end

-- Check and override http_request (for compatibility)
if type(http_request) == "function" then
    originalHttpRequest = http_request
    http_request = mockHttpRequest(originalHttpRequest)
end

-- INTERNAL GUI
loadstring(game:HttpGet("https://raw.githubusercontent.com/hitbyharibo/byfron/main/internal_ui"))()
